This patch set is for the ASxxxx Assembler 5.40 from March 2021.
You are also advised to apply the 5.40 Update 1 from May 11, 2021
From:
https://shop-pdp.net/ashtml/asxupd.php
or
https://shop-pdp.net/ashtml/asxxxx.php


This patch to the assembler is required to guarantee roundtrip of
the disassembled code back into the original binary image.


asxv5p40_6811_no_opt.patch:

The asxv5p40_6811_no_opt.patch patch file was created to remove the
direct addressing mode optimization in the 6811 Assembler, as
described in the M6811 Code-Seeking Disassembler documentation.

Download the source and update:
https://shop-pdp.net/_ftp/asxxxx/asxs5p40.zip
https://shop-pdp.net/_ftp/asxxxx/u01540.zip

To apply, unzip the asxs5p40.zip file and u01540.zip update file:

On Linux and Mac, use:
unzip -L -a asxs5p40.zip
unzip -L -a u01540.zip
From the folder you unzip to, run:
patch -p1 < asxv5p40_6811_no_opt.patch

On Windows, use:
pkunzip -d asxs5p40.zip
pkunzip -d u01540.zip
From the folder you unzip to, run:
patch -p1 < asxv5p40_6811_no_opt_windows.patch


And then compile the as6811 assembler (following its instructions).

This will update the AS6811 assembler to not optimize addresses
in the 0x0000-0x00FF range to Direct (S_DIR) Addressing Mode
unless they are preceded by the "*" symbol and instead keep them
as Extended (S_EXT) Addressing Mode.

This is needed to make sure that code generated by this M6811DIS
program, when reassembled with the AS6811 assembler, will produce
the same original binary that was disassembled.

